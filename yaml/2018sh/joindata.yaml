
# join data, rename column, drop/keep column
joindata:
  TODO: FALSE
  table:
    -
      TODO: FALSE # join gender, huji from student survey into student info
      left:
        table: *kTableStudent
        suffix: ""
        by: "准考证号"
      right:
        table: *kRespondentST
        suffix: *kTableCheck
        select: # if no selected column, will keep all column
          - "准考证号"
          - "学籍号"
          #- "家长问卷密码"
          - "性别"
          - "户籍"
        by: "准考证号"
      join.type: "left" # "inner", left", "right", "full" 
      drop:  # drop columns
        - "考场号"
        - "座位号"
        - "学生问卷密码"
        - "学校编码"
      rename: # rename columns
      keep: # keep columns
      out:
        table: *kTableStudent
        suffix: ""

    -
      TODO: FALSE # join parent password, comment from parent info
      left:
        table: *kTableStudent
        suffix: ""
        by: "准考证号"
      right:
        table: *kTableParent
        suffix: ""
        select: # if no selected column, will keep all column
          - "准考证号"
          - "备注"
          - "家长问卷密码"
        by: "准考证号"
      join.type: "left" # "inner", left", "right", "full" 
      drop:  # drop columns
      rename: # rename columns
      keep: # keep columns
      out:
        table: *kTableStudent
        suffix: ""


    -
      TODO: FALSE # join student info into student survey
      left:
        table: *kRespondentST
        suffix: *kTableCheck
        by: "准考证号"
      right:
        table: *kTableStudent
        suffix: ""
        select: # if no selected column, will keep all column
          - "准考证号"
          - "区"
          - "学校"
        by: "准考证号"
      join.type: "left" # "inner", left", "right", "full" 
      drop:  # drop columns
        - "学生问卷密码"
        - "姓名"
        - "学籍号"
        - "家长问卷密码"
      rename: # rename columns
      keep: # keep columns
      out:
        table: *kRespondentST
        suffix: *kTableJoin

    -
      TODO: FALSE # join parent info into parent survey
      left:
        table: *kRespondentPA
        suffix: *kTableCheck
        by: "密码"
      right:
        table: *kTableStudent
        suffix: ""
        select: # if no selected column, will keep all column
          - "准考证号"
          - "家长问卷密码"
          - "区"
          - "学校"
          - "性别"
          - "户籍"
        by: "家长问卷密码"
      join.type: "left" # "inner", left", "right", "full" 
      drop:  # drop columns
        - "序号"
        - "密码"
      rename: # rename columns
      keep: # keep columns
      out:
        table: *kRespondentPA
        suffix: *kTableJoin

    -
      TODO: FALSE # join teacher info into teacher survey
      left:
        table: *kRespondentTE
        suffix: *kTableCheck
        by: "教师登录密码"
      right:
        table: *kTableTeacher
        suffix: ""
        select: # if no selected column, will keep all column
          - "密码"
          - "区"
          - "校"
        by: "密码"
      join.type: "left" # "inner", left", "right", "full" 
      drop:  # drop columns
      rename: # rename columns
        -
          name: "校"
          rename: "学校"
      keep: # keep columns
      out:
        table: *kRespondentTE
        suffix: *kTableJoin

    -
      TODO: FALSE # join student info into subject chinese
      left:
        table: *kSubjectCN
        suffix: *kTableRaw
        by: "准考证号"
      right:
        table: *kTableStudent
        suffix: ""
        <<: *kColumnStuInfoSelect
        by: "准考证号" 
      join.type: "left" # "inner", left", "right", "full" 
      drop:  # drop columns
         - "姓名1"
      rename: # rename columns
      keep: # keep columns
      out:
        table: *kSubjectCN
        suffix: *kTableJoin

    -
      TODO: FALSE # join student info into subject mathematics
      left:
        table: *kSubjectMA
        suffix: *kTableRaw
        by: "准考证号"
      right:
        table: *kTableStudent
        suffix: ""
        <<: *kColumnStuInfoSelect
        by: "准考证号"
      join.type: "left" # "inner", left", "right", "full" 
      drop:  # drop columns
         - "姓名1"
      rename: # rename columns
      keep: # keep columns
      out:
        table: *kSubjectMA
        suffix: *kTableJoin

    -
      TODO: FALSE # join student info into subject english
      left:
        table: *kSubjectEN
        suffix: *kTableRaw
        by: "准考证号"
      right:
        table: *kTableStudent
        suffix: ""
        <<: *kColumnStuInfoSelect
        by: "准考证号"
      join.type: "left" # "inner", left", "right", "full" 
      drop:  # drop columns
         - "姓名1"
      rename: # rename columns
      keep: # keep columns
      out:
        table: *kSubjectEN
        suffix: *kTableJoin

    -
      TODO: FALSE # join student info into subject science
      left:
        table: *kSubjectSC
        suffix: *kTableRaw
        by: "准考证号"
      right:
        table: *kTableStudent
        suffix: ""
        <<: *kColumnStuInfoSelect
        by: "准考证号"    
      join.type: "left" # "inner", left", "right", "full" 
      drop:  # drop columns
         - "姓名1"
      rename: # rename columns
      keep: # keep columns
      out:
        table: *kSubjectSC
        suffix: *kTableJoin

    -
      TODO: FALSE # join student info into subject art
      left:
        table: *kSubjectAR
        suffix: *kTableRaw
        by: "准考证号"
      right:
        table: *kTableStudent
        suffix: ""
        <<: *kColumnStuInfoSelect
        by: "准考证号"      
      join.type: "left" # "inner", left", "right", "full" 
      drop:  # drop columns
         - "姓名1"
      rename: # rename columns
      keep: # keep column
      out:
        table: *kSubjectAR
        suffix: *kTableJoin

    -
      TODO: FALSE
      left:
        table: *kRespondentST
        suffix: *kTableJoin
        by: "准考证号"
        set:
          - *kRespondentST
      right:
        table: *kSubjectCN
        suffix: *kTableJoin
        select:
          - "准考证号"
        by: "准考证号"
        set:
          - *kSubjectCN
      join.type: "full"
      drop:
      rename:
      keep:
        - "准考证号"
        - *kRespondentST
        - *kSubjectCN
      out:
        table: *kTableStudentJoin
        suffix: ""

    -
      TODO: FALSE
      left:
        table: *kTableStudentJoin
        suffix: ""
        by: "准考证号"
      right:
        table: *kSubjectMA
        suffix: *kTableJoin
        select:
          - "准考证号"
        by: "准考证号"
        set:
          - *kSubjectMA
      join.type: "full"
      drop:
      rename:
      keep:
      out:
        table: *kTableStudentJoin
        suffix: ""
    
    -
      TODO: FALSE
      left:
        table: *kTableStudentJoin
        suffix: ""
        by: "准考证号"
      right:
        table: *kSubjectEN
        suffix: *kTableJoin
        select:
          - "准考证号"
        by: "准考证号"
        set:
          - *kSubjectEN
      join.type: "full"
      drop:
      rename:
      keep:
      out:
        table: *kTableStudentJoin
        suffix: ""

    -
      TODO: FALSE
      left:
        table: *kTableStudentJoin
        suffix: ""
        by: "准考证号"
      right:
        table: *kSubjectSC
        suffix: *kTableJoin
        select:
          - "准考证号"
        by: "准考证号"
        set:
          - *kSubjectSC
      join.type: "full"
      drop:
      rename:
      keep:
      out:
        table: *kTableStudentJoin
        suffix: ""

    -
      TODO: FALSE
      left:
        table: *kTableStudentJoin
        suffix: ""
        by: "准考证号"
      right:
        table: *kSubjectAR
        suffix: *kTableJoin
        select:
          - "准考证号"
        by: "准考证号"
        set:
          - *kSubjectAR
      join.type: "full"
      drop:
      rename:
      keep:
      out:
        table: *kTableStudentJoin
        suffix: ""

    -
      TODO: FALSE
      left:
        table: *kTableStudentJoin
        suffix: ""
        by: "准考证号"
      right:
        table: *kRespondentPA
        suffix: *kTableJoin
        select:
          - "准考证号"
        by: "准考证号"
        set:
          - *kRespondentPA
      join.type: "full"
      drop:
      rename:
      keep:
      out:
        table: *kTableStudentJoin
        suffix: ""

    -
      TODO: FALSE
      left:
        table: *kTableStudentJoin
        suffix: ""
        by: "准考证号"
      right:
        table: *kTableStudent
        suffix: ""
        select:
          - "准考证号"
          - "区"
          - "学校"
        by: "准考证号"
      join.type: "left"
      drop:
      rename:
      keep:
      out:
        table: *kTableStudentJoin
        suffix: ""
