
## anchor defintion
kDefinition:
  kSubject:  # 学科定义
    - &kSubject
      学科
    - &kSubjectCN
      "语文"
    - &kSubjectMA
      "数学"
    - &kSubjectEN
      "英语"
    - &kSubjectSC
      "科学"
    - &kSubjectAR
      "艺术"
    - &kSubjectALL
      "全科"

  kRespondent:  # 受访者定义
    - &kRespondent
      受访者
    - &kRespondentST
      "学生"
    - &kRespondentPA
      "家长"
    - &kRespondentTE
      "教师"
    - &kRespondentPR
      "校长"

  kTable:  # 表名定义

    kTableAttribute:  # 属性表全称
      - &kTableAttrDict
        属性表标准代码
      - &kTableAttrIndex
        属性表指标体系
      - &kTableAttrIdxDim
        属性表指标映射
      - &kTableAttrQuestionAttr
        属性表题目指标
      - &kTableAttrSubjectPoint
        属性表试题分值
      - &kTableAttrSurveyPoint
        属性表问卷赋分
      - &kTableAttrVarTransform
        属性表变量转换
      - &kTableAttrSurveyTrans
        属性表问卷转换
      - &kTableAttrScoreTrans
        属性表成绩转换
      - &kTableAttrMergedTrans
        属性表全科转换
      - &kTableAttrSurveyStat
        属性表问卷统计
      - &kTableAttrScoreStat
        属性表成绩统计
      - &kTableAttrMergedStat
        属性表全科统计
      - &kTableAttrConvergeStat
        属性表综合统计
      - &kTableAttrIndexAlgo
        属性表指数计算
      - &kTableAttrDataQuery
        属性表数据查询
      - &kTableAttrPlotParam
        属性表绘图参数
      - &kTableAttrTableParam
        属性表表格参数
      - &kTableAttrCommentParam
        属性表评论参数

    kTablePrefix:   # 表名称前缀

      kTableInfoPrefix:  # 信息表名称及前缀
        - &kTableDistrict
          信息表区
        - &kTableSchool
          信息表学校
        - &kTableAlias
          信息表别名
        - &kTableStudent
          信息表学生
        - &kTableParent
          信息表家长
        - &kTableTeacher
          信息表教师
        - &kTablePrincipal
          信息表校长

      kTableStatPrefix: # 统计表名称前缀
        - &kTableIndexCoef
          "指标系数"
        - &kTableStatScore
          "学业成绩"
        - &kTableStatSubject
          "学科成绩"
        - &kTableExternalIndex
          "外部指标"

    kTableSuffix:  # 表名称后缀
      - &kTableSuffix
        表后缀
      - &kSuffixRaw
        "原始数据"
      - &kSuffixDict
        "字典数据"
      - &kSuffixParticipate
        "参与数据"
      - &kSuffixExamination
        "参试数据"
      - &kSuffixCheck
        "校验数据"
      - &kSuffixJoin
        "关联数据"
      - &kSuffixSplit
        "拆分数据"
      - &kSuffixClean
        "清洗数据"
      - &kSuffixAssign
        "赋分数据"
      - &kSuffixTransform
        "转换数据"
      - &kSuffixReady
        "就绪数据"
      - &kSuffixStat
        "统计数据"
      - &kSuffixIndex
        "指标数据"
      - &kSuffixConverge     # 指标，系数，统计值汇总
        "汇聚数据"
      - &kSuffixConvergeIndex
        "汇聚指标数据"
      - &kSuffixConvergeStat
        "汇聚统计数据"

  kColumn: # 列名定义
    kColumnName: # 列名称
      - &kColumnQuestionCode
        题号
      - &kColumnQuestionChoice
        选项
      - &kColumnQuestionPoint
        赋分
      - &kColumnQuestionBinary
        二值化
      - &kColumnQuestionType
        题型
      - &kColumnKey
        键
      - &kColumnValue
        值
      - &kColumnCode
        代码
      - &kColumnStudentCode
        准考证号
      - &kColumnParentCode
        家长密码
      - &kColumnTeacherCode
        教师密码
      - &kColumnPrincipalCode
        校长密码
      - &kColumnSchoolCode
        学校编码
      - &kColumnDistrictCode
        区编码

    kColumnSuffix: # 列后缀
      - &kColumnSuffixBinary
        _二值分

  kStatistics: # 统计定义
    kStatisticsTier: &kStatisticsTier   # 统计层级
      tier:
        - &kStatTierCity
          市
        - &kStatTierDistrict
          区
        - &kStatTierSchool
          学校

    kStatisticsPespective:
      - &kStatPerspTotal
        总体

  kData: # 数据定义
    kDataType: # 数据类型
      - &kDataTypeNumeric
        'numeric'

kSetting:
  kDatabase: # 数据库设置

    kTableCreate:  # 创建表

      kDDLStatisticsTable: &kDDLStatisticsTable  # 创建统计表
        DDL: "( 哈希值 text PRIMARY KEY,
                评测项目 text,
                年级 text,
                学科 text,
                领域 text,
                维度 text,
                群组 text,
                属性 text,
                主题 text,
                统计层级 text,
                统计范围 text,
                市 text,
                区 text,
                学校 text,
                统计视角 text,
                统计样本 text,
                统计变量 text,
                统计算法 text,
                指标类型 text,
                数值类型 text,
                键 text,
                值 double precision,
                时间戳 text
              );"

    kColumnAdd:  # 增加列
      kInfoAdd: &kInfoAdd   # 增加新系列
        add:
          -
            name: "市"
            value: "上海市"

      kStatiticsAdd: &kStatisticsAdd   # 增加统计列
        add:
          -
            name: "总体"
            value: "总体"

    kColumnSelect: # 选择列

      kScoreMergeSelect: &kScoreMergeSelect  # 标准分合并选择列
        select:
          - *kColumnStudentCode
          - "总分"
          - "标准分"
          - "高层次思维能力_标准分"

  kControl:  # 控制项设置
    kStatisticsSwitch: # 统计控制开关
      kPilotRun: &kPilotRun  # 先导统计
        pilot:
          tier:
            - *kStatTierCity
          perspective:
            - *kStatPerspTotal
          scope:
            city:
              - "上海市"
            district:
              # - "崇明区"
              # - "宝山区"
              # - "普陀区"
              # - "嘉定区"
              # - "青浦区"
              # - "松江区"
              # - "闵行区"
              # - "金山区"
              # - "奉贤区"
              # - "浦东新区"
              # - "杨浦区"
              # - "虹口区"
              - "静安区"
              # - "长宁区"
              # - "徐汇区"
              # - "黄浦区"

            school:
              - "上海市静安区教育学院附属学校（中学部校区）"
              # - "上海市启秀实验中学"

    kTableReference: # 引用表设置

      kTableRefStatScore: &kTableRefStatScore # 学业统计引用表
        table:
          -
            name: *kSubjectCN
            suffix: *kSuffixStat
          -
            name: *kSubjectMA
            suffix: *kSuffixStat
          -
            name: *kSubjectEN
            suffix: *kSuffixStat
          -
            name: *kSubjectSC
            suffix: *kSuffixStat
          -
            name: *kSubjectAR
            suffix: *kSuffixStat

      kTableRefSubjectRespondent: &kTableRefSubjectRespondent # 统计表引用
        table:
          - *kRespondentST
          - *kRespondentPA
          - *kRespondentTE
          - *kRespondentPR
          - *kSubjectCN
          - *kSubjectMA
          - *kSubjectEN
          - *kSubjectSC
          - *kSubjectAR
          - *kSubjectALL

      kTableRefStatIndex: &kTableRefStatIndex  # 指标系数汇聚数据 引用表
        table:
          -
            name: *kRespondentST
            suffix: *kSuffixStat
          -
            name: *kRespondentPA
            suffix: *kSuffixStat
          -
            name: *kRespondentTE
            suffix: *kSuffixStat
          -
            name: *kRespondentPR
            suffix: *kSuffixStat
          -
            name: *kSubjectCN
            suffix: *kSuffixStat
          -
            name: *kSubjectMA
            suffix: *kSuffixStat
          -
            name: *kSubjectEN
            suffix: *kSuffixStat
          -
            name: *kSubjectSC
            suffix: *kSuffixStat
          -
            name: *kSubjectAR
            suffix: *kSuffixStat
          # -
          #   name: *kSubjectALL
          #   suffix: *kSuffixStat
          -
            name: *kTableStatScore
            suffix: *kSuffixStat

          -
            name: *kRespondentST
            suffix: *kSuffixIndex
          -
            name: *kRespondentPA
            suffix: *kSuffixIndex
          -
            name: *kRespondentTE
            suffix: *kSuffixIndex
          -
            name: *kRespondentPR
            suffix: *kSuffixIndex
          -
            name: *kSubjectCN
            suffix: *kSuffixIndex
          -
            name: *kSubjectMA
            suffix: *kSuffixIndex
          -
            name: *kSubjectEN
            suffix: *kSuffixIndex
          -
            name: *kSubjectSC
            suffix: *kSuffixIndex
          -
            name: *kSubjectAR
            suffix: *kSuffixIndex

          # -
          #   name: *kSubjectALL
          #   suffix: *kSuffixIndex
          -
            name: *kTableStatSubject
            suffix: *kSuffixIndex

          -
            name: *kTableStatScore
            suffix: *kSuffixIndex

          -
            name: *kTableExternalIndex
            suffix: *kSuffixConverge


  kReport:  # 报告设置

    kCopyRight: &kCopyRight  # 版权声明
      copyright:
        year: "2018年度"
        project: "上海市初中学业质量"
        producer:
          - "上海市教育委员会教学研究室"
          - "上海市教育委员会基础教育质量监测中心"
        date: "二〇一九年七月"
        copyright: "版权声明：本报告版权属于上海市教育委员会，未得到上海市教育委员会同意，不得使用或公开报告的任何内容"

    kPrepareDataframe: &kPrepareDataframe  # 数据准备引用表
      dataframe:
        plot:
          table: *kTableAttrPlotParam
          suffix: ""
        table:
          table: *kTableAttrTableParam
          suffix: ""
        comment:
          table: *kTableAttrCommentParam
          suffix: ""
        dataset:
          table: *kTableAttrDataQuery
          suffix: ""
        alias:
          table: *kTableAlias
          suffix: ""
        statistics:
          table: *kTableIndexCoef
          suffix: *kSuffixConverge
        district:
          table: *kTableDistrict
          suffix: *kSuffixRaw
        school:
          table: *kTableSchool
          suffix: *kSuffixJoin
